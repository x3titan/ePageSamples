<page>
  <controls count="20">
    <control type="DivRoot" pathname="/divRoot">
      <backgroundColor>F3F3F3</backgroundColor>
      <bgColorEnabled>true</bgColorEnabled>
      <dockX>fill</dockX>
      <dockY>fill</dockY>
      <height>819</height>
      <left>0</left>
      <onControlLoad>/*var isIOS = !!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);
if (!isIOS) {
    ee.getControl("layoutyitem1").heavy = 0;
}*/
setTimeout(function(){
    ee.autoResize = false;
},1000);
</onControlLoad>
      <pageHead><![CDATA[<meta name="viewport" content="width=device-width, minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
]]></pageHead>
      <top>0</top>
      <width>1105</width>
    </control>
    <control type="Panel" pathname="/divRoot/panel3">
      <backgroundColor>FFFFFF</backgroundColor>
      <backgroundSkin>body5</backgroundSkin>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <height>475</height>
      <heightRatio>0.57997557997558</heightRatio>
      <left>17</left>
      <leftRatio>0.0151843817787419</leftRatio>
      <sizeRatio>1.06502242152466</sizeRatio>
      <top>192</top>
      <topRatio>0.234432234432234</topRatio>
      <width>1069</width>
      <widthRatio>0.967462039045553</widthRatio>
    </control>
    <control type="LayoutX" pathname="/divRoot/panel3/layoutx1">
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fieldCount>2</fieldCount>
      <height>41</height>
      <heightRatio>0.0863157894736842</heightRatio>
      <left>127</left>
      <leftRatio>0.118834080717489</leftRatio>
      <sizeRatio>0.116477272727273</sizeRatio>
      <top>156</top>
      <topRatio>0.328421052631579</topRatio>
      <width>844</width>
      <widthRatio>0.789237668161435</widthRatio>
    </control>
    <control type="LayoutXItem" pathname="/divRoot/panel3/layoutx1/layoutxitem1">
      <backgroundColor>f0f0f0</backgroundColor>
      <fontSizeAuto>30</fontSizeAuto>
      <hAlign>right</hAlign>
      <heavy>70</heavy>
      <height>41</height>
      <heightRatio>1</heightRatio>
      <left>0</left>
      <sizeRatio>0.206030150753769</sizeRatio>
      <text>手机号码　</text>
      <top>0</top>
      <width>219</width>
      <widthRatio>0.258777633289987</widthRatio>
    </control>
    <control type="LayoutXItem" pathname="/divRoot/panel3/layoutx1/layoutxitem2">
      <backgroundColor>d0d0d0</backgroundColor>
      <heavy>200</heavy>
      <height>41</height>
      <heightRatio>1</heightRatio>
      <left>219</left>
      <leftRatio>0.258777633289987</leftRatio>
      <sizeRatio>0.0719298245614035</sizeRatio>
      <top>0</top>
      <width>625</width>
      <widthRatio>0.741222366710013</widthRatio>
    </control>
    <control type="Edit" pathname="/divRoot/panel3/layoutx1/layoutxitem2/edit1">
      <backgroundSkin>edit1</backgroundSkin>
      <dockX>fill</dockX>
      <dockY>fill</dockY>
      <height>41</height>
      <heightRatio>1</heightRatio>
      <inputFontSize>30</inputFontSize>
      <inputFontSizeAuto>30</inputFontSizeAuto>
      <left>0</left>
      <sizeRatio>0.0719298245614035</sizeRatio>
      <top>0</top>
      <width>625</width>
      <widthRatio>1</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/panel3/panel5">
      <backgroundSkin>button3</backgroundSkin>
      <cursor>pointer</cursor>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fontColor>FFFFFF</fontColor>
      <fontSizeAuto>30</fontSizeAuto>
      <height>42</height>
      <heightRatio>0.0884210526315789</heightRatio>
      <left>345</left>
      <leftRatio>0.322869955156951</leftRatio>
      <onClick>getSmsCode();</onClick>
      <sizeRatio>0.245614035087719</sizeRatio>
      <text>获取验证码</text>
      <top>220</top>
      <topRatio>0.463157894736842</topRatio>
      <width>410</width>
      <widthRatio>0.383408071748879</widthRatio>
    </control>
    <control type="LayoutX" pathname="/divRoot/panel3/layoutx2">
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fieldCount>2</fieldCount>
      <height>41</height>
      <heightRatio>0.0864978902953586</heightRatio>
      <left>124</left>
      <leftRatio>0.116182572614108</leftRatio>
      <sizeRatio>0.0716783216783217</sizeRatio>
      <top>327</top>
      <topRatio>0.687763713080169</topRatio>
      <width>846</width>
      <widthRatio>0.791147994467497</widthRatio>
    </control>
    <control type="LayoutXItem" pathname="/divRoot/panel3/layoutx2/layoutxitem3">
      <backgroundColor>f0f0f0</backgroundColor>
      <fontSizeAuto>30</fontSizeAuto>
      <hAlign>right</hAlign>
      <heavy>70</heavy>
      <height>41</height>
      <heightRatio>1</heightRatio>
      <left>0</left>
      <sizeRatio>0.205</sizeRatio>
      <text>短信验证码</text>
      <top>0</top>
      <width>219</width>
      <widthRatio>0.259403372243839</widthRatio>
    </control>
    <control type="LayoutXItem" pathname="/divRoot/panel3/layoutx2/layoutxitem4">
      <backgroundColor>d0d0d0</backgroundColor>
      <heavy>200</heavy>
      <height>41</height>
      <heightRatio>1</heightRatio>
      <left>219</left>
      <leftRatio>0.259403372243839</leftRatio>
      <sizeRatio>0.0718038528896672</sizeRatio>
      <top>0</top>
      <width>627</width>
      <widthRatio>0.740596627756161</widthRatio>
    </control>
    <control type="Edit" pathname="/divRoot/panel3/layoutx2/layoutxitem4/edit2">
      <backgroundSkin>edit1</backgroundSkin>
      <dockX>fill</dockX>
      <dockY>fill</dockY>
      <height>41</height>
      <heightRatio>1</heightRatio>
      <inputFontSize>30</inputFontSize>
      <inputFontSizeAuto>30</inputFontSizeAuto>
      <left>0</left>
      <sizeRatio>0.0718038528896672</sizeRatio>
      <top>0</top>
      <width>627</width>
      <widthRatio>1</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/panel3/panel2">
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fontBold>true</fontBold>
      <fontSizeAuto>30</fontSizeAuto>
      <height>57</height>
      <heightRatio>0.12</heightRatio>
      <left>62</left>
      <leftRatio>0.0582959641255605</leftRatio>
      <sizeRatio>0.14321608040201</sizeRatio>
      <text>请输入您的手机号码，以后您将以这个号码登录系统</text>
      <top>50</top>
      <topRatio>0.105263157894737</topRatio>
      <width>954</width>
      <widthRatio>0.89237668161435</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/panel4">
      <backgroundColor>FFFFFF</backgroundColor>
      <backgroundImgMode>fill</backgroundImgMode>
      <bgColorEnabled>true</bgColorEnabled>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fontSizeAuto>30</fontSizeAuto>
      <height>107</height>
      <heightRatio>0.130647130647131</heightRatio>
      <left>0</left>
      <sizeRatio>0.18904593639576</sizeRatio>
      <top>71</top>
      <topRatio>0.0866910866910867</topRatio>
      <width>1105</width>
      <widthRatio>1</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/panel4/panel7">
      <backgroundImg>1.png</backgroundImg>
      <backgroundImgMode>fill</backgroundImgMode>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fontSizeAuto>30</fontSizeAuto>
      <height>71</height>
      <heightRatio>0.663551401869159</heightRatio>
      <left>24</left>
      <leftRatio>0.0213414634146341</leftRatio>
      <sizeRatio>0.0565737051792829</sizeRatio>
      <top>35</top>
      <topRatio>0.327102803738318</topRatio>
      <width>1057</width>
      <widthRatio>0.95655487804878</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/panel1">
      <backgroundSkin>button3</backgroundSkin>
      <cursor>pointer</cursor>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fontColor>FFFFFF</fontColor>
      <fontSizeAuto>20</fontSizeAuto>
      <height>46</height>
      <heightRatio>0.0561660561660562</heightRatio>
      <left>249</left>
      <leftRatio>0.225596529284165</leftRatio>
      <onClick>checkSmsCode();</onClick>
      <sizeRatio>0.184</sizeRatio>
      <text><![CDATA[下一步　>>]]></text>
      <top>708</top>
      <topRatio>0.864468864468865</topRatio>
      <width>599</width>
      <widthRatio>0.542299349240781</widthRatio>
    </control>
    <control type="LayoutY" pathname="/divRoot/layouty1">
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fieldCount>2</fieldCount>
      <height>90</height>
      <heightRatio>0.10989010989011</heightRatio>
      <left>0</left>
      <sizeRatio>0.0685975609756098</sizeRatio>
      <top>0</top>
      <width>1105</width>
      <widthRatio>1</widthRatio>
    </control>
    <control type="LayoutYItem" pathname="/divRoot/layouty1/layoutyitem1">
      <backgroundColor>BFCEDF</backgroundColor>
      <bgColorEnabled>true</bgColorEnabled>
      <heavy>0</heavy>
      <height>0</height>
      <heightRatio>0.322222222222222</heightRatio>
      <left>0</left>
      <sizeRatio>0.0262443438914027</sizeRatio>
      <top>0</top>
      <width>1105</width>
      <widthRatio>1</widthRatio>
    </control>
    <control type="LayoutYItem" pathname="/divRoot/layouty1/layoutyitem2">
      <backgroundColor>47A9F9</backgroundColor>
      <bgColorEnabled>true</bgColorEnabled>
      <fontColor>FFFFFF</fontColor>
      <fontSizeAuto>15</fontSizeAuto>
      <height>90</height>
      <heightRatio>0.677777777777778</heightRatio>
      <left>0</left>
      <sizeRatio>0.0605759682224429</sizeRatio>
      <text>验证手机</text>
      <top>0</top>
      <topRatio>0.322222222222222</topRatio>
      <width>1105</width>
      <widthRatio>1</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/layouty1/layoutyitem2/panel8">
      <backgroundImg>back.png</backgroundImg>
      <backgroundImgMode>fill</backgroundImgMode>
      <cursor>pointer</cursor>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fontSizeAuto>30</fontSizeAuto>
      <height>50</height>
      <heightRatio>0.557377049180328</heightRatio>
      <left>30</left>
      <leftRatio>0.0274442538593482</leftRatio>
      <sizeRatio>0.492753623188406</sizeRatio>
      <top>19</top>
      <topRatio>0.213114754098361</topRatio>
      <width>131</width>
      <widthRatio>0.118353344768439</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/layouty1/layoutyitem2/panel10">
      <backgroundSkin>empty</backgroundSkin>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <height>84</height>
      <heightRatio>0.934426229508197</heightRatio>
      <left>2</left>
      <leftRatio>0.00198609731876862</leftRatio>
      <onClick>window.location.href = ee.pageRoot + "/loginApp/loginStudent1";
</onClick>
      <sizeRatio>0.289340101522843</sizeRatio>
      <top>1</top>
      <topRatio>0.0163934426229508</topRatio>
      <width>216</width>
      <widthRatio>0.195630585898709</widthRatio>
    </control>
  </controls>
  <taskSet count="2">
    <taskSetItem name="getSmsCode">
      <script1>var mobile = ee.getEditText(ee.getControl("edit1"));
//手机号码检测
if (mobile.length!=11) {
    alert("对不起，您输入的不是一个有效的手机号码");
    return;
}
if (!(/^\d+$/.test(mobile))) {
    alert("对不起，您输入的不是一个有效的手机号码");
    return;
} 

eio.appendString8(mobile);
</script1>
      <script2><![CDATA[var mobile = eio.readString8();
while (true) { 
    var sql = "select * from userInfo where mobile='" + mobile + "'and enabled='T'";
    var sqlResult = db.executeQuery("PJ", sql);
    if (db.read(sqlResult)) {
        eio.appendString8("F");
        eio.appendString8("您输入的手机号码已经被注册使用过，请通过密码找回的形式获得您以前注册的账号");
        return;
    }
    //后台手机号验证
    if (mobile.length!=11) {
        eio.appendString8("F");
        eio.appendString8("手机号非法");
        break;
    }
    if (!(/^\d+$/.test(mobile))) {
        eio.appendString8("F");
        eio.appendString8("手机号非法");
        break;
    }
    //产生验证码
    var code = 0;
    var seed = (new Date()).getTime();
    while (code<1000) {
        seed = ( seed * 9301 + 49297 ) % 233280;
        var rand = seed / 233280.0;
        code = Math.floor(rand * 10000);
    }
    //存储验证码和手机号
    session.set("mobileCode", code + "");
    session.set("mobile", mobile);
    //发送验证码
    var sql = "insert into sms (mobile, message) values (" +
        "'" + db.encode(mobile) + "'," +
        "'您的验证码是：" + code + "')";
    if (!db.executeNoneQuery("PJ", sql)) {
        eio.appendString8("F");
        eio.appendString8("系统繁忙请稍后再试");
        break;
    } 
    eio.appendString8("T");
    break;
}
              ]]></script2>
      <script3>if (eio.readString8()!="T") {
    alert("发送验证码失败：" + eio.readString8());
    return;
}
alert("验证码已经以短信的形式发送到您的手机上，请注意查收。验证码是一个4位的数字，请将它填写在下面的栏目中");

</script3>
    </taskSetItem>
    <taskSetItem name="checkSmsCode">
      <script1>var mobileCode = ee.getEditText(ee.getControl("edit2"));
eio.appendString8(mobileCode);
</script1>
      <script2><![CDATA[var mobileCode = eio.readString8();
while (true) {
    var mobileCodeS = session.get("mobileCode");
    if (mobileCodeS.length<=0) {
        eio.appendString8("F");
        eio.appendString8("请点击发送按钮，收到短信后填写验证码");
        break;
    }
    if (mobileCodeS!=mobileCode) {
        session.set("mobileCode", "");
        eio.appendString8("F");
        eio.appendString8("您输入的验证码不正确，请重新发送并输入一次验证码");
        break;
    }    
    eio.appendString8("T");
    session.set("mobileCheck", "true");
    break;
}
]]></script2>
      <script3>if (eio.readString8()!="T") {
    alert("验证失败：" + eio.readString8());
    return;
}
window.location.href = ee.pageRoot + "/loginApp/loginStudent3";

 
</script3>
    </taskSetItem>
  </taskSet>
  <gridLines count="0" />
</page>