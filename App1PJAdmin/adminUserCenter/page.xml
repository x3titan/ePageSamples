<page>
  <controls count="19">
    <control type="DivRoot" pathname="/divRoot">
      <backgroundColor>ffffff</backgroundColor>
      <bgColorEnabled>true</bgColorEnabled>
      <dockX>fill</dockX>
      <dockY>fill</dockY>
      <height>816</height>
      <left>0</left>
      <onControlLoad>getUserInfo();</onControlLoad>
      <top>0</top>
      <width>1132</width>
    </control>
    <control type="Panel" pathname="/divRoot/panel1">
      <alpha>0.3</alpha>
      <backgroundColor>FFFFFF</backgroundColor>
      <bgColorEnabled>true</bgColorEnabled>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <height>600</height>
      <heightRatio>0.735294117647059</heightRatio>
      <left>217</left>
      <leftRatio>0.191696113074205</leftRatio>
      <sizeRatio>0.860832137733142</sizeRatio>
      <top>80</top>
      <topRatio>0.0980392156862745</topRatio>
      <width>697</width>
      <widthRatio>0.615724381625442</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/panel1/panel2">
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fontFamily>黑体</fontFamily>
      <fontSize>20</fontSize>
      <height>60</height>
      <heightRatio>0.1</heightRatio>
      <left>0</left>
      <sizeRatio>0.0666666666666667</sizeRatio>
      <text>账户信息修改</text>
      <top>10</top>
      <topRatio>0.0166666666666667</topRatio>
      <width>697</width>
      <widthRatio>1</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/panel1/panel2/panel3">
      <bgColorEnabled>true</bgColorEnabled>
      <dockX>ratio</dockX>
      <dockY>bottom</dockY>
      <height>2</height>
      <heightRatio>0.0333333333333333</heightRatio>
      <left>0</left>
      <sizeRatio>0.00222222222222222</sizeRatio>
      <top>58</top>
      <topRatio>0.966666666666667</topRatio>
      <width>697</width>
      <widthRatio>1</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/panel1/panel4">
      <autoScroll>true</autoScroll>
      <dockX>fill</dockX>
      <height>530</height>
      <heightRatio>0.883333333333333</heightRatio>
      <left>0</left>
      <sizeRatio>0.588888888888889</sizeRatio>
      <top>69</top>
      <topRatio>0.115</topRatio>
      <width>697</width>
      <widthRatio>1</widthRatio>
    </control>
    <control type="LayoutX" pathname="/divRoot/panel1/panel4/layoutx1">
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fieldCount>1</fieldCount>
      <height>40</height>
      <heightRatio>0.0754716981132075</heightRatio>
      <left>148</left>
      <leftRatio>0.212222222222222</leftRatio>
      <sizeRatio>0.27027027027027</sizeRatio>
      <top>59</top>
      <topRatio>0.111320754716981</topRatio>
      <width>115</width>
      <widthRatio>0.164444444444444</widthRatio>
    </control>
    <control type="LayoutXItem" pathname="/divRoot/panel1/panel4/layoutx1/layoutxitem1">
      <backgroundColor>80FFFF</backgroundColor>
      <bgColorEnabled>true</bgColorEnabled>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fontBold>true</fontBold>
      <fontFamily>黑体</fontFamily>
      <fontSize>12</fontSize>
      <heavy>40</heavy>
      <height>40</height>
      <heightRatio>1</heightRatio>
      <left>0</left>
      <sizeRatio>0.27027027027027</sizeRatio>
      <text>账户名</text>
      <top>0</top>
      <width>115</width>
      <widthRatio>1</widthRatio>
    </control>
    <control type="LayoutX" pathname="/divRoot/panel1/panel4/layoutx2">
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fieldCount>1</fieldCount>
      <height>40</height>
      <heightRatio>0.0754716981132075</heightRatio>
      <left>148</left>
      <leftRatio>0.212222222222222</leftRatio>
      <sizeRatio>0.27027027027027</sizeRatio>
      <top>118</top>
      <topRatio>0.222641509433962</topRatio>
      <width>115</width>
      <widthRatio>0.164444444444444</widthRatio>
    </control>
    <control type="LayoutXItem" pathname="/divRoot/panel1/panel4/layoutx2/layoutxitem3">
      <backgroundColor>80FFFF</backgroundColor>
      <bgColorEnabled>true</bgColorEnabled>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fontBold>true</fontBold>
      <fontFamily>黑体</fontFamily>
      <fontSize>12</fontSize>
      <heavy>40</heavy>
      <height>40</height>
      <heightRatio>1</heightRatio>
      <left>0</left>
      <sizeRatio>0.27027027027027</sizeRatio>
      <text>旧密码</text>
      <top>0</top>
      <width>115</width>
      <widthRatio>1</widthRatio>
    </control>
    <control type="LayoutX" pathname="/divRoot/panel1/panel4/layoutx3">
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fieldCount>1</fieldCount>
      <height>40</height>
      <heightRatio>0.0754716981132075</heightRatio>
      <left>148</left>
      <leftRatio>0.212222222222222</leftRatio>
      <sizeRatio>0.27027027027027</sizeRatio>
      <top>179</top>
      <topRatio>0.337735849056604</topRatio>
      <width>115</width>
      <widthRatio>0.164444444444444</widthRatio>
    </control>
    <control type="LayoutXItem" pathname="/divRoot/panel1/panel4/layoutx3/layoutxitem5">
      <backgroundColor>80FFFF</backgroundColor>
      <bgColorEnabled>true</bgColorEnabled>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fontBold>true</fontBold>
      <fontFamily>黑体</fontFamily>
      <fontSize>12</fontSize>
      <heavy>40</heavy>
      <height>40</height>
      <heightRatio>1</heightRatio>
      <left>0</left>
      <sizeRatio>0.27027027027027</sizeRatio>
      <text>新密码</text>
      <top>0</top>
      <width>115</width>
      <widthRatio>1</widthRatio>
    </control>
    <control type="LayoutX" pathname="/divRoot/panel1/panel4/layoutx4">
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fieldCount>1</fieldCount>
      <height>40</height>
      <heightRatio>0.0754716981132075</heightRatio>
      <left>148</left>
      <leftRatio>0.212222222222222</leftRatio>
      <sizeRatio>0.27027027027027</sizeRatio>
      <top>239</top>
      <topRatio>0.450943396226415</topRatio>
      <width>115</width>
      <widthRatio>0.164444444444444</widthRatio>
    </control>
    <control type="LayoutXItem" pathname="/divRoot/panel1/panel4/layoutx4/layoutxitem7">
      <backgroundColor>80FFFF</backgroundColor>
      <bgColorEnabled>true</bgColorEnabled>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fontBold>true</fontBold>
      <fontFamily>黑体</fontFamily>
      <fontSize>12</fontSize>
      <heavy>40</heavy>
      <height>40</height>
      <heightRatio>1</heightRatio>
      <left>0</left>
      <sizeRatio>0.27027027027027</sizeRatio>
      <text>确认密码</text>
      <top>0</top>
      <width>115</width>
      <widthRatio>1</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/panel1/panel4/panel5">
      <backgroundSkin>skin1000</backgroundSkin>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fontBold>true</fontBold>
      <fontColor>FFFFFF</fontColor>
      <fontFamily>黑体</fontFamily>
      <fontSize>15</fontSize>
      <height>38</height>
      <heightRatio>0.0716981132075472</heightRatio>
      <left>221</left>
      <leftRatio>0.316666666666667</leftRatio>
      <onClick><![CDATA[//判断
var e1 = ee.getEditText(ee.getControl("edit1")); 
var e2 = ee.getEditText(ee.getControl("edit2"));
var e3 = ee.getEditText(ee.getControl("edit3"));
var e4 = ee.getEditText(ee.getControl("edit4"));  

if(e1.length <=0){
    alert("请输入账户名");
    return;
} else if(e1.length >10){
    alert("账户名不宜过长，请重新输入");
    return;
}      
if(e2.length < 6){
    alert("密码长度不能小于6位");
    return;
}
if(e3.length < 6){
    alert("密码长度不能小于6位");
    return;
} 
if(e3 != e4){
    alert("确认密码和新密码不一致，请重新输入")
    return;
}         


updateInfo();]]></onClick>
      <sizeRatio>0.294573643410853</sizeRatio>
      <text>提交</text>
      <top>336</top>
      <topRatio>0.633962264150943</topRatio>
      <widthRatio>0.143333333333333</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/panel1/panel4/panel6">
      <backgroundSkin>skin1000</backgroundSkin>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fontBold>true</fontBold>
      <fontColor>FFFFFF</fontColor>
      <fontFamily>黑体</fontFamily>
      <fontSize>15</fontSize>
      <height>38</height>
      <heightRatio>0.0716981132075472</heightRatio>
      <left>376</left>
      <leftRatio>0.538888888888889</leftRatio>
      <onClick>ee.setEditText(ee.getControl("edit2"),"");  
ee.setEditText(ee.getControl("edit3"),"");
ee.setEditText(ee.getControl("edit4"),"");
</onClick>
      <sizeRatio>0.294573643410853</sizeRatio>
      <text>重置</text>
      <top>336</top>
      <topRatio>0.633962264150943</topRatio>
      <widthRatio>0.143333333333333</widthRatio>
    </control>
    <control type="Edit" pathname="/divRoot/panel1/panel4/edit1">
      <backgroundSkin>edit1001</backgroundSkin>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fontBold>true</fontBold>
      <fontFamily>黑体</fontFamily>
      <fontSize>15</fontSize>
      <height>40</height>
      <heightRatio>0.0754716981132075</heightRatio>
      <left>263</left>
      <leftRatio>0.377777777777778</leftRatio>
      <sizeRatio>0.108108108108108</sizeRatio>
      <top>59</top>
      <topRatio>0.111320754716981</topRatio>
      <width>287</width>
      <widthRatio>0.411111111111111</widthRatio>
    </control>
    <control type="Edit" pathname="/divRoot/panel1/panel4/edit2">
      <backgroundSkin>edit1001</backgroundSkin>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fontBold>true</fontBold>
      <fontFamily>黑体</fontFamily>
      <fontSize>15</fontSize>
      <height>40</height>
      <heightRatio>0.0754716981132075</heightRatio>
      <inputPassword>true</inputPassword>
      <left>263</left>
      <leftRatio>0.377777777777778</leftRatio>
      <sizeRatio>0.108108108108108</sizeRatio>
      <top>118</top>
      <topRatio>0.222641509433962</topRatio>
      <width>287</width>
      <widthRatio>0.411111111111111</widthRatio>
    </control>
    <control type="Edit" pathname="/divRoot/panel1/panel4/edit3">
      <backgroundSkin>edit1001</backgroundSkin>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fontBold>true</fontBold>
      <fontFamily>黑体</fontFamily>
      <fontSize>15</fontSize>
      <height>40</height>
      <heightRatio>0.0754716981132075</heightRatio>
      <inputPassword>true</inputPassword>
      <left>263</left>
      <leftRatio>0.377777777777778</leftRatio>
      <sizeRatio>0.108108108108108</sizeRatio>
      <top>179</top>
      <topRatio>0.337735849056604</topRatio>
      <width>287</width>
      <widthRatio>0.411111111111111</widthRatio>
    </control>
    <control type="Edit" pathname="/divRoot/panel1/panel4/edit4">
      <backgroundSkin>edit1001</backgroundSkin>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fontBold>true</fontBold>
      <fontFamily>黑体</fontFamily>
      <fontSize>15</fontSize>
      <height>40</height>
      <heightRatio>0.0754716981132075</heightRatio>
      <inputPassword>true</inputPassword>
      <left>263</left>
      <leftRatio>0.377777777777778</leftRatio>
      <sizeRatio>0.108108108108108</sizeRatio>
      <top>239</top>
      <topRatio>0.450943396226415</topRatio>
      <width>287</width>
      <widthRatio>0.411111111111111</widthRatio>
    </control>
  </controls>
  <taskSet count="3">
    <taskSetItem name="getUserInfo">
      <script1 />
      <script2>eio.appendString8(session.get("username"));
eio.appendInt32(session.get("loginId"));</script2>
      <script3>var userName = eio.readString8();
var userId = eio.readInt32();
g5.userId = userId;

ee.setEditText(ee.getControl("edit1"),userName);
console.log("userId="+userId+" userName="+userName); 

</script3>
    </taskSetItem>
    <taskSetItem name="updateInfo">
      <script1>eio.appendString8(ee.getEditText(ee.getControl("edit1"))); 
eio.appendString8(ee.getEditText(ee.getControl("edit2")));
eio.appendString8(ee.getEditText(ee.getControl("edit3")));
eio.appendString8(ee.getEditText(ee.getControl("edit4")));  
eio.appendInt32(g5.userId);</script1>
      <script2>var userName = eio.readString8();
var oldPwd = eio.readString8();
var newPwd = eio.readString8();
var repPwd = eio.readString8();
var userId = eio.readInt32();  

var oldPwdMd5 = es.getMd5(oldPwd);
var newPwdMd5 = es.getMd5(newPwd);

var sql,sqlResult;
sql = "select id from adminUser where id='"+userId+"' and password='"+db.encode(oldPwdMd5)+"' ";
sqlResult = db.executeQuery("PJ",sql);  
db.read(sqlResult); 
var id = db.getString(sqlResult,"id");
if(id == ""){
    eio.appendString8("F");
    return;
}         

sql = "update adminUser set username='"+db.encode(userName)+"', password='"+db.encode(newPwdMd5)+"' where id='"+userId+"'";
sqlResult = db.executeNoneQuery("PJ",sql);


eio.appendString8("T");


</script2>
      <script3>
var code = eio.readString8();
if (code =="F"){
    alert("输入的旧密码错误");
    return;
}          

if (code == "T"){
    alert("信息修改成功");
    //reLoad();
}</script3>
    </taskSetItem>
    <taskSetItem name="reLoad">
      <script1 />
      <script2>session.set("username","");
session.set("loginId","");</script2>
      <script3>window.location.href =ee.pageRoot+ "/login";</script3>
    </taskSetItem>
  </taskSet>
  <gridLines count="0" />
</page>