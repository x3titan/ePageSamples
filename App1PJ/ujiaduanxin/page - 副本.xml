<page>
  <controls count="26">
    <control type="DivRoot" pathname="/divRoot">
      <backgroundColor>FFFFFF</backgroundColor>
      <bgColorEnabled>true</bgColorEnabled>
      <dockX>fill</dockX>
      <dockY>fill</dockY>
      <height>799</height>
      <left>0</left>
      <onControlLoad>g5.sum =0;
g5.t = 0;
g5.dx = "";      
 var H = ee.getEditText(ee.getControl("edit1"));
var M = ee.getEditText(ee.getControl("edit2"));
var S = ee.getEditText(ee.getControl("edit3"));
g5.date = H *3600000 + M * 60000 + S * 1000;
 g5.time1 = setInterval(monitor,g5.date); 
function test(){
    //ee.postUrl("monitor","http://sdk4report.eucp.b2m.cn:8080/sdkproxy/querybalance.action?cdkey=6SDK-EMY-6688-KIRTP&amp;password=690215"); 
    monitor();
     //console.log("检测");
}

//日志输出
g5.writeLog = function (log) {
    var c = ee.getControl("panel7");
    var t = ee.getText(c);
    var d = new Date();  
    var m = d.getMonth() + 1;
    t += "\r\n" + d.getFullYear() + "-" + m + "-" + d.getDate() + " " + d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds() + " " + log;
    ee.setText(c, t);   
    //console.log("\r\n" + d.getFullYear() + "-" + m + "-" + d.getDate() + " " + d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds() + " " + log);
}
</onControlLoad>
      <top>0</top>
      <width>1147</width>
    </control>
    <control type="Panel" pathname="/divRoot/panel6">
      <backgroundColor>F0F0F0</backgroundColor>
      <backgroundImg>background (2).jpg</backgroundImg>
      <backgroundImgMode>stretch</backgroundImgMode>
      <bgColorEnabled>true</bgColorEnabled>
      <dockX>center</dockX>
      <dockY>fill</dockY>
      <fontColor>FF0000</fontColor>
      <hAlign>left</hAlign>
      <height>799</height>
      <heightRatio>1</heightRatio>
      <left>304</left>
      <leftRatio>0.276578073089701</leftRatio>
      <sizeRatio>1.48513011152416</sizeRatio>
      <top>0</top>
      <vAlign>top</vAlign>
      <width>538</width>
      <widthRatio>0.446843853820598</widthRatio>
    </control>
    <control type="LayoutY" pathname="/divRoot/panel6/layouty1">
      <dockX>fill</dockX>
      <dockY>fill</dockY>
      <height>799</height>
      <heightRatio>1</heightRatio>
      <left>0</left>
      <sizeRatio>1.48513011152416</sizeRatio>
      <top>0</top>
      <width>538</width>
      <widthRatio>1</widthRatio>
    </control>
    <control type="LayoutYItem" pathname="/divRoot/panel6/layouty1/layoutyitem1">
      <backgroundColor>f0f0f0</backgroundColor>
      <heavyEnabled>false</heavyEnabled>
      <height>33</height>
      <heightRatio>0.0413016270337922</heightRatio>
      <left>0</left>
      <sizeRatio>0.0613382899628253</sizeRatio>
      <top>0</top>
      <width>538</width>
      <widthRatio>1</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/panel6/layouty1/layoutyitem1/panel9">
      <backgroundColor>50C9F3</backgroundColor>
      <backgroundImg>background (2).jpg</backgroundImg>
      <backgroundImgMode>stretch</backgroundImgMode>
      <bgColorEnabled>true</bgColorEnabled>
      <dockX>fill</dockX>
      <dockY>fill</dockY>
      <fontBold>true</fontBold>
      <fontColor>404040</fontColor>
      <fontFamily>微软雅黑</fontFamily>
      <fontSize>12</fontSize>
      <height>33</height>
      <heightRatio>1</heightRatio>
      <left>0</left>
      <sizeRatio>0.0613382899628253</sizeRatio>
      <text>ujia短信条数监听页面</text>
      <top>0</top>
      <width>538</width>
      <widthRatio>1</widthRatio>
    </control>
    <control type="LayoutYItem" pathname="/divRoot/panel6/layouty1/layoutyitem2">
      <backgroundColor>d0d0d0</backgroundColor>
      <heavyEnabled>false</heavyEnabled>
      <heightRatio>0.125156445556946</heightRatio>
      <left>0</left>
      <sizeRatio>0.185873605947955</sizeRatio>
      <top>33</top>
      <topRatio>0.0413016270337922</topRatio>
      <width>538</width>
      <widthRatio>1</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/panel6/layouty1/layoutyitem2/panel10">
      <height>36</height>
      <heightRatio>0.36</heightRatio>
      <left>1</left>
      <leftRatio>0.00185873605947955</leftRatio>
      <sizeRatio>0.307692307692308</sizeRatio>
      <text>查询次数：</text>
      <top>1</top>
      <topRatio>0.01</topRatio>
      <width>117</width>
      <widthRatio>0.217472118959108</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/panel6/layouty1/layoutyitem2/panel3">
      <backgroundSkin>edit1</backgroundSkin>
      <fontColor>FF0000</fontColor>
      <height>25</height>
      <heightRatio>0.25</heightRatio>
      <leftRatio>0.185873605947955</leftRatio>
      <sizeRatio>0.431034482758621</sizeRatio>
      <text>0</text>
      <top>7</top>
      <topRatio>0.07</topRatio>
      <width>58</width>
      <widthRatio>0.107806691449814</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/panel6/layouty1/layoutyitem2/panel2">
      <backgroundSkin>edit1</backgroundSkin>
      <height>25</height>
      <heightRatio>0.25</heightRatio>
      <left>170</left>
      <leftRatio>0.315985130111524</leftRatio>
      <sizeRatio>0.36231884057971</sizeRatio>
      <text>检测中</text>
      <top>7</top>
      <topRatio>0.07</topRatio>
      <width>69</width>
      <widthRatio>0.128252788104089</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/panel6/layouty1/layoutyitem2/panel11">
      <height>34</height>
      <heightRatio>0.34</heightRatio>
      <left>252</left>
      <leftRatio>0.468401486988848</leftRatio>
      <sizeRatio>0.373626373626374</sizeRatio>
      <text>获取结果：</text>
      <top>2</top>
      <topRatio>0.02</topRatio>
      <width>91</width>
      <widthRatio>0.169144981412639</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/panel6/layouty1/layoutyitem2/panel1">
      <backgroundSkin>edit1</backgroundSkin>
      <height>25</height>
      <heightRatio>0.25</heightRatio>
      <left>325</left>
      <leftRatio>0.604089219330855</leftRatio>
      <sizeRatio>0.121951219512195</sizeRatio>
      <text>获取结果</text>
      <top>7</top>
      <topRatio>0.07</topRatio>
      <width>205</width>
      <widthRatio>0.381040892193309</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/panel6/layouty1/layoutyitem2/panel8">
      <height>25</height>
      <heightRatio>0.25</heightRatio>
      <left>2</left>
      <leftRatio>0.00371747211895911</leftRatio>
      <sizeRatio>0.274725274725275</sizeRatio>
      <text>监听时间间隔</text>
      <top>34</top>
      <topRatio>0.34</topRatio>
      <width>91</width>
      <widthRatio>0.169144981412639</widthRatio>
    </control>
    <control type="Edit" pathname="/divRoot/panel6/layouty1/layoutyitem2/edit1">
      <backgroundSkin>edit1</backgroundSkin>
      <height>25</height>
      <heightRatio>0.25</heightRatio>
      <inputText>0</inputText>
      <leftRatio>0.185873605947955</leftRatio>
      <onFocusLost>var phone=ee.getEditText(ee.getControl("edit1"));    
console.log(phone);
if(phone=="0"){
    return;
}  

if(isNaN(phone) || phone == ""){
    alert("请填数字");
    ee.setEditText(ee.getControl("edit1"),"0");
    return;
}        
</onFocusLost>
      <sizeRatio>0.5</sizeRatio>
      <top>34</top>
      <topRatio>0.34</topRatio>
      <width>50</width>
      <widthRatio>0.0929368029739777</widthRatio>
    </control>
    <control type="Edit" pathname="/divRoot/panel6/layouty1/layoutyitem2/edit2">
      <backgroundSkin>edit1</backgroundSkin>
      <height>25</height>
      <heightRatio>0.25</heightRatio>
      <inputText>10</inputText>
      <left>194</left>
      <leftRatio>0.360594795539033</leftRatio>
      <onFocusLost>var phone=ee.getEditText(ee.getControl("edit2"));
if(phone=="0"){
    return;
}  

if(isNaN(phone) || phone == ""){
    alert("请填数字");
    ee.setEditText(ee.getControl("edit2"),"0");
    return;
}
</onFocusLost>
      <sizeRatio>0.5</sizeRatio>
      <top>34</top>
      <topRatio>0.34</topRatio>
      <width>50</width>
      <widthRatio>0.0929368029739777</widthRatio>
    </control>
    <control type="Edit" pathname="/divRoot/panel6/layouty1/layoutyitem2/edit3">
      <backgroundSkin>edit1</backgroundSkin>
      <height>25</height>
      <heightRatio>0.25</heightRatio>
      <inputText>0</inputText>
      <left>287</left>
      <leftRatio>0.533457249070632</leftRatio>
      <onFocusLost>var phone=ee.getEditText(ee.getControl("edit3"));
if(phone=="0"){
    return;
}  

if(isNaN(phone) || phone == ""){
    alert("请填数字");
    ee.setEditText(ee.getControl("edit3"),"0");
    return;
}
</onFocusLost>
      <sizeRatio>0.5</sizeRatio>
      <top>34</top>
      <topRatio>0.34</topRatio>
      <width>50</width>
      <widthRatio>0.0929368029739777</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/panel6/layouty1/layoutyitem2/panel4">
      <backgroundSkin>App1PJ001</backgroundSkin>
      <fontColor>FFFFFF</fontColor>
      <height>29</height>
      <heightRatio>0.29</heightRatio>
      <left>391</left>
      <leftRatio>0.726765799256506</leftRatio>
      <onClick>var H = ee.getEditText(ee.getControl("edit1"));
var M = ee.getEditText(ee.getControl("edit2"));
var S = ee.getEditText(ee.getControl("edit3"));
if(H == "0" &amp;&amp; M =="0" &amp;&amp; S == "0"){
    alert("时间不能全为0");
    ee.setEditText(ee.getControl("edit1"),"1"); 
}

window.clearInterval(g5.time1);
date();</onClick>
      <sizeRatio>0.305263157894737</sizeRatio>
      <text>修改</text>
      <top>34</top>
      <topRatio>0.34</topRatio>
      <width>95</width>
      <widthRatio>0.176579925650558</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/panel6/layouty1/layoutyitem2/panel5">
      <height>25</height>
      <heightRatio>0.25</heightRatio>
      <left>155</left>
      <leftRatio>0.288104089219331</leftRatio>
      <sizeRatio>0.833333333333333</sizeRatio>
      <text>时</text>
      <top>34</top>
      <topRatio>0.34</topRatio>
      <width>30</width>
      <widthRatio>0.0557620817843866</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/panel6/layouty1/layoutyitem2/panel12">
      <height>25</height>
      <heightRatio>0.25</heightRatio>
      <left>251</left>
      <leftRatio>0.466542750929368</leftRatio>
      <sizeRatio>0.833333333333333</sizeRatio>
      <text>分</text>
      <top>34</top>
      <topRatio>0.34</topRatio>
      <width>30</width>
      <widthRatio>0.0557620817843866</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/panel6/layouty1/layoutyitem2/panel13">
      <height>25</height>
      <heightRatio>0.25</heightRatio>
      <left>348</left>
      <leftRatio>0.646840148698885</leftRatio>
      <sizeRatio>0.833333333333333</sizeRatio>
      <text>秒</text>
      <top>34</top>
      <topRatio>0.34</topRatio>
      <width>30</width>
      <widthRatio>0.0557620817843866</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/panel6/layouty1/layoutyitem2/panel14">
      <height>25</height>
      <heightRatio>0.25</heightRatio>
      <left>2</left>
      <leftRatio>0.00371747211895911</leftRatio>
      <sizeRatio>0.274725274725275</sizeRatio>
      <text>紧急联系人</text>
      <top>66</top>
      <topRatio>0.66</topRatio>
      <width>91</width>
      <widthRatio>0.169144981412639</widthRatio>
    </control>
    <control type="Edit" pathname="/divRoot/panel6/layouty1/layoutyitem2/edit5">
      <backgroundSkin>edit1</backgroundSkin>
      <height>25</height>
      <heightRatio>0.25</heightRatio>
      <inputText>17317123658</inputText>
      <left>101</left>
      <leftRatio>0.187732342007435</leftRatio>
      <onFocusLost>var phone=ee.getEditText(ee.getControl("edit1"));    
console.log(phone);
if(phone==""){
    return;
}  

if(isNaN(phone)){
    alert("您的电话号码有非法字符请重新输入");
    ee.setEditText(ee.getControl("edit1"),"");
    return;
}
if(phone.toString().length != 11){
    alert("您电话号码格式有误请重新输入");
    ee.setEditText(ee.getControl("edit1"),"");
    return;
}          </onFocusLost>
      <sizeRatio>0.274725274725275</sizeRatio>
      <top>66</top>
      <topRatio>0.66</topRatio>
      <width>91</width>
      <widthRatio>0.169144981412639</widthRatio>
    </control>
    <control type="Edit" pathname="/divRoot/panel6/layouty1/layoutyitem2/edit6">
      <backgroundSkin>edit1</backgroundSkin>
      <height>25</height>
      <heightRatio>0.25</heightRatio>
      <inputText>17621960788</inputText>
      <left>195</left>
      <leftRatio>0.362453531598513</leftRatio>
      <onFocusLost>var phone=ee.getEditText(ee.getControl("edit2"));
if(phone==""){
    return;
}  

if(isNaN(phone)){
    alert("您的电话号码有非法字符请重新输入");
    ee.setEditText(ee.getControl("edit2"),"");
    return;
}
if(phone.toString().length != 11){
    alert("您电话号码格式有误请重新输入");
    ee.setEditText(ee.getControl("edit2"),"");
    return;
}          </onFocusLost>
      <sizeRatio>0.274725274725275</sizeRatio>
      <top>66</top>
      <topRatio>0.66</topRatio>
      <width>91</width>
      <widthRatio>0.169144981412639</widthRatio>
    </control>
    <control type="Edit" pathname="/divRoot/panel6/layouty1/layoutyitem2/edit7">
      <backgroundSkin>edit1</backgroundSkin>
      <height>25</height>
      <heightRatio>0.25</heightRatio>
      <inputText>17612182415</inputText>
      <left>288</left>
      <leftRatio>0.535315985130111</leftRatio>
      <onFocusLost>var phone=ee.getEditText(ee.getControl("edit3"));
if(phone==""){
    return;
}  

if(isNaN(phone)){
    alert("您的电话号码有非法字符请重新输入");
    ee.setEditText(ee.getControl("edit3"),"");
    return;
}
if(phone.toString().length != 11){
    alert("您电话号码格式有误请重新输入");
    ee.setEditText(ee.getControl("edit3"),"");
    return;
}          </onFocusLost>
      <sizeRatio>0.274725274725275</sizeRatio>
      <top>66</top>
      <topRatio>0.66</topRatio>
      <width>91</width>
      <widthRatio>0.169144981412639</widthRatio>
    </control>
    <control type="Edit" pathname="/divRoot/panel6/layouty1/layoutyitem2/edit4">
      <backgroundSkin>edit1</backgroundSkin>
      <height>25</height>
      <heightRatio>0.25</heightRatio>
      <inputText>18516181654</inputText>
      <left>381</left>
      <leftRatio>0.70817843866171</leftRatio>
      <onFocusLost>var phone=ee.getEditText(ee.getControl("edit4"));
if(phone==""){
    return;
}  

if(isNaN(phone)){
    alert("您的电话号码有非法字符请重新输入");
    ee.setEditText(ee.getControl("edit4"),"");
    return;
}
if(phone.toString().length != 11){
    alert("您电话号码格式有误请重新输入");
    ee.setEditText(ee.getControl("edit4"),"");
    return;
}          </onFocusLost>
      <sizeRatio>0.274725274725275</sizeRatio>
      <top>66</top>
      <topRatio>0.66</topRatio>
      <width>91</width>
      <widthRatio>0.169144981412639</widthRatio>
    </control>
    <control type="LayoutYItem" pathname="/divRoot/panel6/layouty1/layoutyitem3">
      <backgroundColor>f0f0f0</backgroundColor>
      <height>666</height>
      <heightRatio>0.833541927409262</heightRatio>
      <left>0</left>
      <sizeRatio>1.23791821561338</sizeRatio>
      <top>133</top>
      <topRatio>0.166458072590738</topRatio>
      <width>538</width>
      <widthRatio>1</widthRatio>
    </control>
    <control type="Panel" pathname="/divRoot/panel6/layouty1/layoutyitem3/panel7">
      <backgroundSkin>edit1</backgroundSkin>
      <dockX>fill</dockX>
      <dockY>fill</dockY>
      <fontColor>FF0000</fontColor>
      <hAlign>left</hAlign>
      <height>646</height>
      <heightRatio>0.96996996996997</heightRatio>
      <left>10</left>
      <leftRatio>0.0185873605947955</leftRatio>
      <outerBottom>10</outerBottom>
      <outerLeft>10</outerLeft>
      <outerRight>10</outerRight>
      <outerTop>10</outerTop>
      <sizeRatio>1.24710424710425</sizeRatio>
      <text>日志</text>
      <top>10</top>
      <topRatio>0.015015015015015</topRatio>
      <vAlign>bottom</vAlign>
      <width>518</width>
      <widthRatio>0.962825278810409</widthRatio>
    </control>
  </controls>
  <taskSet count="3">
    <taskSetItem name="monitor">
      <script1> /*
httpClient.onReceive = monitor_ajax.onReceive;
httpClient.post("http://m.1peijia.com/EEngine/ee.aspx?_L_=/ujia/listening&amp;_T_=listenings","");     
return;
   */

  //ee.postUrl("monitor","http://m.1peijia.com/EEngine/ee.aspx?_L_=/ujia/listening&amp;_T_=listenings");
  </script1>
      <script2><![CDATA[ var gg =   es.post("http://sdk4report.eucp.b2m.cn:8080/sdkproxy/querybalance.action?cdkey=6SDK-EMY-6688-KIRTP&amp;password=690215","");
  
gg = gg.replace('<?xml version="1.0" encoding="UTF-8"?><response><error>0</error><message>', "");              
gg = gg.replace("</message></response>", "");   
gg = parseFloat(gg)*10;
eio.appendInt32(gg);   　
              
  
if(gg== "-1040"){
    return;
};
var sql,sqlResult;
sql = "INSERT INTO ujiaDuanxinLog (createtime, updatetime,data) VALUES (getdate(), getdate(),'"+db.encode(gg)+"');"
sqlResult=db.executeQuery("PJ", sql);   




                                              ]]></script2>
      <script3><![CDATA[//var gg =eio.buffi;
var gg = eio.readInt32();
ee.setText(ee.getControl("panel1"),gg); 
g5.sum++;     
ee.setText(ee.getControl("panel3"),g5.sum); 
g5.writeLog("  短信条数为"+gg);
g5.gg = gg;  

if(g5.dx == "" &amp;&amp; gg >0 &amp;&amp; gg < 1000){
    g5.dx = gg;                                                         
    console.log("g5.dx:"+g5.dx);
    console.log("gg:"+gg);
    return;
}                   
                          
if (gg > 0 &amp;&amp; g5.dx != "" &amp;&amp; (g5.dx - gg) >= 100 &amp;&amp; gg < 1000) {
    console.log("g5.dx:"+g5.dx);
    console.log("gg:"+gg);
    var gt = g5.dx -gg;
    console.log("gt:"+gt);    
    g5.dx = gg;
    sms();
    return
}
//if(gg != "0a2213312179"){                
//    g5.sum++;                                                                   
//    g5.t = 0;
//     g5.writeLog("  发生错误，获取的信息为"+gg);
//     ee.setText(ee.getControl("panel2"),"错误");  
//    if(g5.sum >= 3){
//       //sms();
//    }
   
//}else { 
//    g5.t++;
//    g5.sum = 0; 
//    g5.flag = "T";
//    ee.setText(ee.getControl("panel2"),"正确");
//}

]]></script3>
    </taskSetItem>
    <taskSetItem name="sms">
      <script1>var sum = g5.gg;
eio.appendInt32(sum);

var tel1 = ee.getEditText(ee.getControl("edit5"));
var tel2 = ee.getEditText(ee.getControl("edit6"));
var tel3 = ee.getEditText(ee.getControl("edit7"));
var tel4 = ee.getEditText(ee.getControl("edit4"));
eio.appendString8(tel1);
eio.appendString8(tel2);
eio.appendString8(tel3);
eio.appendString8(tel4);
</script1>
      <script2>
var sum = eio.readInt32();

var tel1 = eio.readString8();
var tel2 = eio.readString8();
var tel3 = eio.readString8();
var tel4 = eio.readString8();
var sql,sqlResult;
     
          
        if(tel1 != ""){
            sql = "insert into sms (mobile, message) values ('"+db.encode(tel1)+"','短信剩余条数剩余"+db.encode(sum)+"条')";
            sqlResult=db.executeQuery("PJ", sql); 
        }  
        if(tel2 != ""){
            sql = "insert into sms (mobile, message) values ('"+db.encode(tel2)+"','短信剩余条数剩余"+db.encode(sum)+"条')";
            sqlResult=db.executeQuery("PJ", sql);
        }  
        if(tel3 != ""){    
            sql = "insert into sms (mobile, message) values ('"+db.encode(tel3)+"','短信剩余条数剩余"+db.encode(sum)+"条')";
            sqlResult=db.executeQuery("PJ", sql);
        }  
        if(tel4 != ""){    
            sql = "insert into sms (mobile, message) values ('"+db.encode(tel4)+"','短信剩余条数剩余"+db.encode(sum)+"条')";
            sqlResult=db.executeQuery("PJ", sql);  
        }
        eio.appendString8("T");
        


</script2>
      <script3><![CDATA[var time = new Date();
   var m = time.getMonth() + 1;
   var t = time.getFullYear() + "-" + m + "-"
     + time.getDate() + " " + time.getHours() + ":"
     + time.getMinutes() + ":" + time.getSeconds();
   

    console.log("短信发送成功");
    ee.setText(ee.getControl("panel7"),ee.getText(ee.getControl("panel7"))+"<br>"+t + " 短信发送成功"); 




]]></script3>
    </taskSetItem>
    <taskSetItem name="date">
      <script1>var H = ee.getEditText(ee.getControl("edit1"));
var M = ee.getEditText(ee.getControl("edit2"));
var S = ee.getEditText(ee.getControl("edit3"));
g5.date = H *3600000 + M * 60000 + S * 1000;
g5.time1 = setInterval(monitor,g5.date);        
</script1>
      <script2 />
      <script3 />
    </taskSetItem>
  </taskSet>
  <gridLines count="0" />
</page>