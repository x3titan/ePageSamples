<page>
  <controls count="15">
    <control type="DivRoot" pathname="/divRoot">
      <left>0</left>
      <top>0</top>
      <width>1035</width>
      <height>819</height>
      <dockX>fill</dockX>
      <dockY>fill</dockY>
      <backgroundColor>F3F3F3</backgroundColor>
      <bgColorEnabled>true</bgColorEnabled>
      <pageHead><![CDATA[<meta name="viewport" content="width=device-width, minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">]]></pageHead>
    </control>
    <control type="Panel" pathname="/divRoot/panel9">
      <left>0</left>
      <top>0</top>
      <width>1035</width>
      <height>73</height>
      <widthRatio>1</widthRatio>
      <heightRatio>0.0891330891330891</heightRatio>
      <sizeRatio>0.12784588441331</sizeRatio>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <backgroundColor>47A9F9</backgroundColor>
      <bgColorEnabled>true</bgColorEnabled>
      <text>重置密码</text>
      <fontSizeAuto>20</fontSizeAuto>
      <fontColor>FFFFFF</fontColor>
      <fontBold>true</fontBold>
      <layerVisible>false</layerVisible>
    </control>
    <control type="Panel" pathname="/divRoot/panel9/panel4">
      <left>13</left>
      <top>17</top>
      <width>138</width>
      <height>38</height>
      <leftRatio>0.01256038647343</leftRatio>
      <topRatio>0.232876712328767</topRatio>
      <widthRatio>0.133333333333333</widthRatio>
      <heightRatio>0.520547945205479</heightRatio>
      <sizeRatio>0.27536231884058</sizeRatio>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <backgroundImg>back.png</backgroundImg>
      <backgroundImgMode>fill</backgroundImgMode>
      <fontSizeAuto>30</fontSizeAuto>
      <cursor>pointer</cursor>
      <onClick>window.location.href = ee.pageRoot + "/modifyPassword";


</onClick>
    </control>
    <control type="Panel" pathname="/divRoot/panel8">
      <left>205</left>
      <top>689</top>
      <width>657</width>
      <height>51</height>
      <leftRatio>0.198237885462555</leftRatio>
      <topRatio>0.841269841269841</topRatio>
      <widthRatio>0.634361233480176</widthRatio>
      <heightRatio>0.0622710622710623</heightRatio>
      <sizeRatio>0.118055555555556</sizeRatio>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <backgroundSkin>button3</backgroundSkin>
      <text>确 定</text>
      <fontSizeAuto>20</fontSizeAuto>
      <fontColor>FFFFFF</fontColor>
      <cursor>pointer</cursor>
      <onClick>checkSmsCode();
</onClick>
    </control>
    <control type="Panel" pathname="/divRoot/panel3">
      <left>0</left>
      <top>91</top>
      <width>1035</width>
      <height>475</height>
      <topRatio>0.111111111111111</topRatio>
      <widthRatio>1</widthRatio>
      <heightRatio>0.57997557997558</heightRatio>
      <sizeRatio>0.390946502057613</sizeRatio>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <backgroundColor>FFFFFF</backgroundColor>
      <backgroundSkin>body5</backgroundSkin>
    </control>
    <control type="LayoutX" pathname="/divRoot/panel3/layoutx1">
      <left>49</left>
      <top>156</top>
      <width>892</width>
      <height>41</height>
      <leftRatio>0.0469135802469136</leftRatio>
      <topRatio>0.328421052631579</topRatio>
      <widthRatio>0.861728395061728</widthRatio>
      <heightRatio>0.0863157894736842</heightRatio>
      <sizeRatio>0.0391595033428844</sizeRatio>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fieldCount>2</fieldCount>
    </control>
    <control type="LayoutXItem" pathname="/divRoot/panel3/layoutx1/layoutxitem1">
      <left>0</left>
      <top>0</top>
      <width>231</width>
      <height>41</height>
      <widthRatio>0.25883476599809</widthRatio>
      <heightRatio>1</heightRatio>
      <sizeRatio>0.151291512915129</sizeRatio>
      <backgroundColor>f0f0f0</backgroundColor>
      <text>手机号码　</text>
      <fontSizeAuto>30</fontSizeAuto>
      <hAlign>right</hAlign>
      <heavy>70</heavy>
    </control>
    <control type="LayoutXItem" pathname="/divRoot/panel3/layoutx1/layoutxitem2">
      <left>231</left>
      <top>0</top>
      <width>661</width>
      <height>41</height>
      <leftRatio>0.25883476599809</leftRatio>
      <widthRatio>0.74116523400191</widthRatio>
      <heightRatio>1</heightRatio>
      <sizeRatio>0.0528350515463918</sizeRatio>
      <backgroundColor>d0d0d0</backgroundColor>
      <heavy>200</heavy>
    </control>
    <control type="Edit" pathname="/divRoot/panel3/layoutx1/layoutxitem2/edit1">
      <left>0</left>
      <top>0</top>
      <width>661</width>
      <height>41</height>
      <widthRatio>1</widthRatio>
      <heightRatio>1</heightRatio>
      <sizeRatio>0.0528350515463918</sizeRatio>
      <dockX>fill</dockX>
      <dockY>fill</dockY>
      <backgroundSkin>edit1</backgroundSkin>
      <inputFontSize>30</inputFontSize>
      <inputFontSizeAuto>30</inputFontSizeAuto>
    </control>
    <control type="Panel" pathname="/divRoot/panel3/panel5">
      <left>280</left>
      <top>220</top>
      <width>397</width>
      <height>42</height>
      <leftRatio>0.270781893004115</leftRatio>
      <topRatio>0.463157894736842</topRatio>
      <widthRatio>0.383539094650206</widthRatio>
      <heightRatio>0.0884210526315789</heightRatio>
      <sizeRatio>0.0901287553648069</sizeRatio>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <backgroundSkin>button3</backgroundSkin>
      <text>获取验证码</text>
      <fontSizeAuto>30</fontSizeAuto>
      <fontColor>FFFFFF</fontColor>
      <cursor>pointer</cursor>
      <onClick>getSmsCode();</onClick>
    </control>
    <control type="LayoutX" pathname="/divRoot/panel3/layoutx2">
      <left>51</left>
      <top>328</top>
      <width>890</width>
      <height>41</height>
      <leftRatio>0.0493827160493827</leftRatio>
      <topRatio>0.690526315789474</topRatio>
      <widthRatio>0.860082304526749</widthRatio>
      <heightRatio>0.0863157894736842</heightRatio>
      <sizeRatio>0.0392344497607656</sizeRatio>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <fieldCount>2</fieldCount>
    </control>
    <control type="LayoutXItem" pathname="/divRoot/panel3/layoutx2/layoutxitem3">
      <left>0</left>
      <top>0</top>
      <width>231</width>
      <height>41</height>
      <widthRatio>0.25933014354067</widthRatio>
      <heightRatio>1</heightRatio>
      <sizeRatio>0.151291512915129</sizeRatio>
      <backgroundColor>f0f0f0</backgroundColor>
      <text>短信验证码　</text>
      <fontSizeAuto>31</fontSizeAuto>
      <hAlign>right</hAlign>
      <heavy>70</heavy>
    </control>
    <control type="LayoutXItem" pathname="/divRoot/panel3/layoutx2/layoutxitem4">
      <left>231</left>
      <top>0</top>
      <width>659</width>
      <height>41</height>
      <leftRatio>0.25933014354067</leftRatio>
      <widthRatio>0.74066985645933</widthRatio>
      <heightRatio>1</heightRatio>
      <sizeRatio>0.0529715762273902</sizeRatio>
      <backgroundColor>d0d0d0</backgroundColor>
      <heavy>200</heavy>
    </control>
    <control type="Edit" pathname="/divRoot/panel3/layoutx2/layoutxitem4/edit2">
      <left>0</left>
      <top>0</top>
      <width>659</width>
      <height>41</height>
      <widthRatio>1</widthRatio>
      <heightRatio>1</heightRatio>
      <sizeRatio>0.0529715762273902</sizeRatio>
      <dockX>fill</dockX>
      <dockY>fill</dockY>
      <backgroundSkin>edit1</backgroundSkin>
      <inputFontSize>30</inputFontSize>
      <inputFontSizeAuto>30</inputFontSizeAuto>
    </control>
    <control type="Panel" pathname="/divRoot/panel3/panel2">
      <left>60</left>
      <top>50</top>
      <width>924</width>
      <height>57</height>
      <leftRatio>0.0579710144927536</leftRatio>
      <topRatio>0.105263157894737</topRatio>
      <widthRatio>0.893115942028985</widthRatio>
      <heightRatio>0.12</heightRatio>
      <sizeRatio>0.115618661257606</sizeRatio>
      <dockX>ratio</dockX>
      <dockY>ratio</dockY>
      <text>请输入您的手机号码，用以验证您的手机</text>
      <fontSizeAuto>30</fontSizeAuto>
      <fontBold>true</fontBold>
    </control>
  </controls>
  <taskSet count="2">
    <taskSetItem name="getSmsCode">
      <script1>var mobile = ee.getEditText(ee.getControl("edit1"));
//手机号码检测
if (mobile.length!=11) {
    alert("对不起，您输入的不是一个有效的手机号码");
    return;
}
if (!(/^\d+$/.test(mobile))) {
    alert("对不起，您输入的不是一个有效的手机号码");
    return;
}
eio.appendString8(mobile);
</script1>
      <script2><![CDATA[var mobile = eio.readString8();
while (true) {
    //后台手机号验证
    if (mobile.length!=11) {
        eio.appendString8("F");
        eio.appendString8("手机号非法");
        break;
    }
    if (!(/^\d+$/.test(mobile))) {
        eio.appendString8("F");
        eio.appendString8("手机号非法");
        break;
    }
    //产生验证码
    var code = 0;
    var seed = (new Date()).getTime();
    while (code<1000) {
        seed = ( seed * 9301 + 49297 ) % 233280;
        var rand = seed / 233280.0;
        code = Math.floor(rand * 10000);
    }
    //存储验证码和手机号
    session.set("mobileCode", code + "");
    session.set("mobile", mobile);
    //发送验证码
    var sql = "insert into sms (mobile, message) values (" +
        "'" + db.encode(mobile) + "'," +
        "'您的验证码是：" + code + "')";
    if (!db.executeNoneQuery("PJ", sql)) {
        eio.appendString8("F");
        eio.appendString8("系统繁忙请稍后再试");
        break;
    }
    eio.appendString8("T");
    break;
}
              ]]></script2>
      <script3>if (eio.readString8()!="T") {
    alert("发送验证码失败：" + eio.readString8());
    return;
}
alert("验证码已经以短信的形式发送到您的手机上，请注意查收。验证码是一个4位的数字，请将它填写在下面的栏目中");

</script3>
    </taskSetItem>
    <taskSetItem name="checkSmsCode">
      <script1>var mobileCode = ee.getEditText(ee.getControl("edit2"));
eio.appendString8(mobileCode);
</script1>
      <script2><![CDATA[var mobileCode = eio.readString8();
while (true) {
    var mobileCodeS = session.get("mobileCode");
    if (mobileCodeS.length<=0) {
        eio.appendString8("F");
        eio.appendString8("请点击发送按钮，收到短信后填写验证码");
        break;
    }
    if (mobileCodeS!=mobileCode) {
        session.set("mobileCode", "");
        eio.appendString8("F");
        eio.appendString8("您输入的验证码不正确，请重新发送并输入一次验证码");
        break;
    }    
    eio.appendString8("T");
    session.set("mobileCheck", "true");
    break;
}
]]></script2>
      <script3>if (eio.readString8()!="T") {
    alert("验证失败：" + eio.readString8());
    return;
}
window.location.href = ee.pageRoot + "/modifyPassword/resetPassword2";

 
</script3>
    </taskSetItem>
  </taskSet>
  <gridLines count="0" />
</page>